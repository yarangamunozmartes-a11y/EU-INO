<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiMarket Per√∫ - Marketplace Local</title>
    <meta name="theme-color" content="#4f46e5">
    <meta name="description" content="Compra y vende productos en tu zona">
    
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" href="./favicon.ico">
    <link rel="apple-touch-icon" href="./icon-192x192.png">
    
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>

<section id="splash">
    <div class="splash-content">
        <h1>MiMarket</h1>
        <p>Conectando compradores y vendedores locales</p>
    </div>
</section>

<main id="app" style="display: none;">
    <header class="top-bar">
        <h1 class="logo">MiMarket</h1>
        <div class="acciones">
            <button id="btn-comprar" class="btn-activo">Comprar</button>
            <button id="btn-vender">Vender</button>
            <button id="btn-admin" style="display:none;">Admin</button>
        </div>
    </header>

    <section id="busqueda" class="seccion-activa">
        <div class="buscador-header">
            <h2>¬øQu√© est√°s buscando?</h2>
        </div>
        <form id="form-busqueda">
            <div class="input-group">
                <input type="text" id="buscar-producto" placeholder="Ej: Bicicleta, Mueble...">
                <div class="select-group">
                    <select id="provincia" required>
                        <option value="">Provincia</option>
                        <option value="Lima">Lima</option>
                        <option value="Arequipa">Arequipa</option>
                        <option value="Cusco">Cusco</option>
                        <option value="Trujillo">Trujillo</option>
                    </select>
                    <select id="distrito" required>
                        <option value="">Distrito</option>
                        <option value="Miraflores">Miraflores</option>
                        <option value="San Isidro">San Isidro</option>
                        <option value="Surco">Surco</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
            </div>
            <button type="submit" class="btn-buscar">üîç Buscar</button>
        </form>
    </section>

    <section id="resultados">
        <div id="lista-resultados" class="grid-productos"></div>
        <p id="mensaje-vacio" class="mensaje-vacio">Busca productos para ver resultados</p>
    </section>

    <section id="video-tutorial" style="display: none;">
        <h2>¬øC√≥mo vender?</h2>
        <div class="video-placeholder">üé• Tutorial</div>
        <button id="btn-saltar-video" class="btn-secundario">Continuar al registro</button>
    </section>

    <section id="registro-vendedor" style="display: none;">
        <h2>Reg√≠strate</h2>
        <form id="form-vendedor">
            <input type="text" id="nombre" placeholder="Nombre completo" required>
            <input type="email" id="email" placeholder="Email" required>
            <input type="tel" id="telefono" placeholder="WhatsApp (9 d√≠gitos)" required>
            <select id="provincia-vendedor" required>
                <option value="Lima">Lima</option>
                <option value="Arequipa">Arequipa</option>
            </select>
            <select id="distrito-vendedor" required>
                <option value="Miraflores">Miraflores</option>
                <option value="Otros">Otros</option>
            </select>
            <button type="submit" class="btn-registro">Crear Cuenta</button>
        </form>
    </section>

    <section id="perfil-vendedor" style="display: none;">
        <div class="perfil-header">
            <h2 id="perfil-nombre"></h2>
            <p id="perfil-localidad"></p>
            <p>Cr√©ditos: <span id="contador-publicaciones"></span></p>
        </div>
        <button id="btn-nuevo-producto" class="btn-nuevo">‚ûï Publicar Producto</button>
        
        <div id="formulario-producto" style="display: none;">
            <form id="form-producto">
                <input type="text" id="prod-nombre" placeholder="Nombre del producto" required>
                <input type="number" id="prod-precio" placeholder="Precio S/" required>
                <textarea id="prod-descripcion" placeholder="Descripci√≥n..."></textarea>
                <div class="upload-area" id="upload-area">
                    <p>üì∑ Subir Fotos (M√°x 2)</p>
                    <input type="file" id="fotos-producto" accept="image/*" multiple style="display:none">
                </div>
                <div id="preview-fotos" class="preview-fotos"></div>
                <button type="submit" class="btn-publicar">Guardar</button>
                <button type="button" id="btn-cancelar">Cancelar</button>
            </form>
        </div>
        <div id="lista-productos"></div>
    </section>
</main>

<div id="modal-contacto" class="modal" style="display:none">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div id="modal-fotos"></div>
        <h3 id="modal-producto-nombre"></h3>
        <p class="modal-precio" id="modal-producto-precio"></p>
        <p id="modal-producto-descripcion"></p>
        <hr>
        <p>Vendedor: <span id="modal-vendedor-nombre"></span></p>
        <div class="modal-botones">
            <button id="btn-llamar" class="btn-llamar">Llamar</button>
            <button id="btn-whatsapp" class="btn-whatsapp">WhatsApp</button>
        </div>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>

